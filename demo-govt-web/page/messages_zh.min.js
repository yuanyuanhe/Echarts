/*! jQuery Validation Plugin - v1.13.1 - 10/14/2014
 * http://jqueryvalidation.org/
 * Copyright (c) 2014 Jörn Zaefferer; Licensed MIT */
! function (a) {
    "function" == typeof define && define.amd ? define(["jquery", "jquery.validate.min"], a) : a(jQuery)
}(function (a) {
    var icon = "<i class='glyphicon glyphicon-exclamation-sign'></i>  ";
    a.extend(a.validator.messages, {
        required: icon + "必填",
        remote: icon + "请修正此栏位",
        email: icon + "请输入有效的电子邮件",
        url: icon + "请输入有效的网址",
        date: icon + "请输入有效的日期",
        dateISO: icon + "请输入有效的日期 (YYYY-MM-DD)",
        number: icon + "请输入正确的数字",
        digits: icon + "只能输入正整数字",
        creditcard: icon + "请输入有效的信用卡号码",
        equalTo: icon + "你的输入不相同",
        extension: icon + "请输入有效的后缀",
        maxlength: a.validator.format(icon + "最多 {0} 个字"),
        minlength: a.validator.format(icon + "最少 {0} 个字"),
        rangelength: a.validator.format(icon + "请输入长度为 {0} 至 {1} 之间的字串"),
        range: a.validator.format(icon + "请输入 {0} 至 {1} 之间的数值"),
        max: a.validator.format(icon + "请输入不大于 {0} 的数值"),
        min: a.validator.format(icon + "请输入不小于 {0} 的数值")
    });

    // 验证名称不能有特殊符号
    $.validator.addMethod("isName", function(value,element,params){
    	var patrn=/[`~!@#$%^&*()_+<>?:"{},.\/;'[\]]/im;

        if(patrn.test(value)){
            return false;
        }
        return true;
    },icon+"不允许输入特殊符号");

    $.validator.addMethod("alnum", function(value, element) {
        return this.optional(element) || /^[a-zA-Z0-9]+$/.test(value);
    }, icon+"只能输入纯英文或数字");

    // 手机号码验证
    $.validator.addMethod("isMobile", function(value, element) {
        var length = value.length;
        return this.optional(element) || (length == 11 && /^(((13[0-9]{1})|14[579]|(15[0-9]{1})|17[0135678]|(18[0-9]{1}))+\d{8})$/.test(value));
    }, icon + "手机号格式不正确");

    // 字符长度
    jQuery.validator.addMethod("byteRangeLength", function(value, element, param) {
        var length = value.length;
        for (var i = 0; i < value.length; i++) {
            if (value.charCodeAt(i) > 127) {
                length++;
            }
        }
        return this.optional(element) || ( length >= param[0] && length <= param[1] );
    }, $.validator.format("长度为{0}-{1}个字符"));

    // 由中文、英文、数字组成
    $.validator.addMethod("namerule", function(value, element) {
        return this.optional(element) || /^[a-zA-Z0-9\u4e00-\u9fa5]+$/.test(value);
    }, icon+"由中文、英文、数字组成");

    // 登录名由中文、英文、数字及“_”、“-”组成
    $.validator.addMethod("userrule", function(value, element) {
        return this.optional(element) || /^[A-Za-z0-9_\-\u4e00-\u9fa5]+$/.test(value);
    }, icon+"由中文、英文、数字及“_”、“-”组成");

    // 只允许输入"数字""半角逗号"和"-"的验证
    jQuery.validator.addMethod("istelephone", function(value, element) {
        var tel = /^[0-9]{0}([0-9]|[,]|[-])+$/;
        return this.optional(element) || (tel.test(value));
    }, "只能输入数字或半角逗号和- ");

    $.validator.setDefaults({
        highlight:function(a) {
            $(a).parent().removeClass("has-success").addClass("has-error");
        },
        success:function(a,b) {
            a.parent().removeClass("has-error").addClass("has-success")
        },
        errorElement:"span",
        errorPlacement:function(a,b) {
            if (b.is(":radio")||b.is(":checkbox")) {
                a.appendTo(b.parent().parent().parent());
            }
            else {
                a.appendTo(b.parent());
            }
        },
        errorClass:"help-block m-b-none",validClass:"help-block m-b-none"
    });
    
    // 验证名称不能有特殊符号
    $.validator.addMethod("isStartEn", function(value,element,params){
        var patrn=/^[a-zA-Z][a-zA-Z0-9]*$/;
        if(!patrn.test(value)){
            return false;
        }
        return true;
    },icon+"英文字母开头，只能包含英文字母、数字 ");
    
    $.validator.addMethod("isTel", function(value, element) { 
        var tel = /^\d{3,4}-?\d{4,9}$/; //电话号码格式010-12345678 
        return this.optional(element) || (tel.test(value)); 
    }, icon+"请输入正确的电话号码"); 
    

    
    
});
